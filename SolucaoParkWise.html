<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Financeira</title>
</head>

<body
    style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; color: white; background-color: black;">
    <h1>Simulador Financeiro - ParkWise</h1>
    <p>Isso é apenas um simulação, não tome como verdade absoluta mas sim como uma aproximação da realidade.</p>
    <h3>Digite a capacidade total do estacionamento: </h3>
    <input type="number" id="ipt_capacidadeTotal">
    <h3>Digite a média de quantidade de vagas ocupadas: </h3>
    <input type="number" id="ipt_vagasOcupadas">
    <h3>Digite o preço por hora: </h3>
    <input type="number" id="ipt_preco_hora">
    <h3>Digite o preço para adicionar por hora </h3>
    <input type="number" id="ipt_precoAdicional"> <br> <br>
    <button onclick="simular()">Simular agora!</button>
    <div id="div_mensagem"></div>
</body>

</html>
<script>
    function simular() {
        var capacidade = Number(ipt_capacidadeTotal.value); // capacidade total do estacionamento
        var preco = Number(ipt_preco_hora.value);  // preço por hora cobrado
        var precoAdicional = Number(ipt_precoAdicional.value)  // preço adicional para cada hora que passa
        var vagasOcupadas = Number(ipt_vagasOcupadas.value);  // vagas ocupdas no estacionemnto

        var vagasLivres = capacidade - vagasOcupadas; // vagas livres no estacionamento

        var valorParaCadaCarro = preco + precoAdicional * 2; // estimativa de 3 horas diárias por carro em cada vaga
        var receita = vagasOcupadas * valorParaCadaCarro * 8; // receita do estacionamento gerado por cada vaga

        var manutencao = preco * 0.3; // manutenção dos sensores é 30% do preço para cada carro
        var prejuizo = vagasLivres * manutencao * preco; //prejuízo para cada vaga livre no estacionamento 

        var lucro = receita - prejuizo; // lucro diário(constante)
        var lucroSemanal = lucro * 7; // lucro semanal(constante)
        var lucroMensal = lucro * 30; // lucro mensal(constante)

        div_mensagem.innerHTML =
            `
        <br> <br>
        O Estacionamento tem capacidade total de ${capacidade}, cobrando R$${preco} por hora e com adicional de R$${precoAdicional} por hora <br>
        <p style = "color:green;">Vagas Ocupadas: ${vagasOcupadas} </p>
        <p style = "color:green;">Receita: R$${receita}</p>
        <p style = "color:red;">Vagas Livres: ${vagasLivres} </p>
        <p style = "color:red;">Prejuízo: R$${prejuizo}</p>

        Lucro Diário:  R$${lucro} <br>
        Lucro Semanal: R$${lucroSemanal} <br>
        Lucro Mensal:  R$${lucroMensal} <br>
        <br>
        `
        if (receita <= prejuizo) {
            //diminuir o preço em 30% p/ aumentar em 50% a taxa de ocupação
            var solucao = preco * 0.3;
            var vagaNova = vagasOcupadas * 1.50;
            var finalVaga = vagaNova - capacidade;

            valorParaCadaCarro = solucao + precoAdicional * 2;
            receita = vagaNova * valorParaCadaCarro * 8;

            var valorDescontado = receita * 0.75 * 1.65;
            var aumentoValor = ((valorDescontado * 100) / receita) - 100;

            prejuizo = finalVaga * manutencao * preco;
            var ajusteFinal = valorDescontado - prejuizo;

            div_mensagem.innerHTML +=
                `
            Com o prejuizo de R$${lucroMensal} por mês ou a falta do lucro , diminua o preço da vaga por 
            30% isso poderá aumentar o fluxo de clientes em 50%, gerando assim uma receita de ${valorDescontado} <br> <br>
            
            Com isso haverá um aumento de ${aumentoValor}% na receita
            <br><br>
            Lucro Diário:  R$${ajusteFinal} <br>
            Lucro Semanal: R$${ajusteFinal * 7} <br>
            Lucro Mensal:  R$${ajusteFinal * 30} <br>
            
            `
        } else {
            div_mensagem.innerHTML +=
                `O seu lucro é R$${lucroMensal} por mês, continue assim!`
        }
    }
</script>